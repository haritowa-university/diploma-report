\subsubsection{}
\label{sec:development:client:encryption}

Первым разработанным в~приложении модулем является модуль криптографии, так как для~его работы не нужны никакие дополнительные специфические для~приложения зависимости.

Основным классом, предоставляющим криптографическое \gls{api} является \textit{Crypt}. Класс предоставляет широкий набор возможностей:

\begin{itemize}
	\item \textit{RSA} шифрование и~дешифрование;
	\item \textit{AES} шифрование и~дешифрование;
	\item генерация \textit{AES} и~\textit{RSA} ключей;
	\item деривацию \textit{AES} ключа из~строки (используется для~генерации ключа из~пароля приложения);
	\item сериализацию и~десереализацию публичного \textit{RSA} ключа в~\textit{PEM} формат;
	\item абстрагирует работу с~iOS технологией для~безопасного хранения значений \textit{Keychain};
	\item набор констант, обильно использующихся во всех криптографических процессах приложения;
	\item вспомогательные методы для~сохранения и~чтения криптографической личности пользователя.
\end{itemize}

Также класс вводит несколько алиасов типов:
\begin{itemize}
	\item \textit{AESKey} -- массив байт, представляющих собой ключ для~\textit{AES} шифрования;
	\item \textit{RSAPrivateKey} -- массив байт, представляющих собой приватный ключ для~\textit{RSA} шифрования;
	\item \textit{RSAPublicKey} -- массив байт, представляющих собой публичный ключ для~\textit{RSA} шифрования.
\end{itemize}

Для упрощения разработки приложения, используется библиотека \textit{SwCrypt}.

Также модуль криптографии содержит в~себе набор возможных ошибок, которые происходят при работе с~\gls{api} модуля, который отражён на~рисунке \ref{sec:development:client:encryption:code:errors}.

\begin{figure}[h]
	\lstinputlisting{inc/src/crypto_errors.swift}
   \caption{Набор возможных ошибок при работе с~API модуля криптографии}
   \label{sec:development:client:encryption:code:errors}
\end{figure}

Последним типом в~модуле криптографии является \textit{UserCryptIdentity}, который отражает криптографическую личность пользователя:
\begin{itemize}
	\item публичный и~приватный \textit{RSA} ключи;
	\item \textit{PEM} публичного ключа пользователя;
	\item \textit{AES} ключ и~начальный вектор для~локального содержимого.
\end{itemize}