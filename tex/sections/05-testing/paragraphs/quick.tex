\subsubsection{}
\label{sec:testing:tech:xctest}

Ещё одной проблемой в~мире тестирования iOS-приложений является отсутствие хороших стандартных инструментов. Apple предлоставляет тесовый фреймворк \textit{XCTest}, который позволяет писать любые виды тестов:

\begin{itemize}
	\item модульные;
	\item интеграционные;
	\item тесты пользовательского интерфейса;
	\item тесты производительности;
	\item и~многие другие.
\end{itemize}

Несмотря на~гибкость фреймворка, работа с~ним сильно усложняется из-за подхода: набор тестов описывается наследником от~\textit{XCTestCase}, подготовка перед тестами и~сброс после тестов выполняется в~переопределяемых методах, а~каждый тест является отедльным методом. Такой подход заставляет вводить переменные в~тестах, усложняет процесс фокусированной подготовки к группе тестов. Ещё одним минусом является набор методов для~верификации тестов, который, в~случае ошибки, не способен сгенерировать осмысленное описание. Длинна названия каждого метода становится очень большой, тестовый контекст разбросан по~типу, чтение таких конфигураций не является тривиальной задачей, что портит идею использования модульных тестов в~качестве приложения к документации.

\subsubsection{}
\label{sec:testing:tech:quick}
\textit{Quick} -- фреймворк для~разработки тестов по~методологии "движемой поведением разработки" для~языков Swift и~Objective-C, вдохновлённый RSpec, Specta и~Ginkgo\cite{github:quick}.

Для решения описанных в~пункте \ref{sec:testing:tech:xctest} проблем в~проекте используется тестовый фреймворк \textit{Quick} и~прилагающийся к нему набор методов верификации \textit{Nimble}.

\textit{Quick} рассматривает набор тестов как один метод, который формируется из~трёх вспомогательных:

\begin{enumerate}
	\item \textit{it} содержит один или более вызовов верификации и~отражает один тест;
	\item \textit{describe} -- служит для~группировки остальных методов по~тестируемому свойству или поведению;
	\item \textit{context} -- описывает некоторый контекст, в~котором будут выполнятся вложенные тесты.
\end{enumerate}

К каждому из~методов конфигурации можно добавить неограниченное количество методов подготовки и~очистки, название тестов генерируется из~иерархии используемых \textit{describe} и~\textit{context}, а~осмысленные сообщения об ошибках генерируют методы верификации из~модуля \textit{Nimble}.

\subsubsection{}
\label{sec:testing:tech:cuckoo}
Для генерации \textit{Mock} и~\textit{Stub} объектов используется библиотека \textit{Cuckoo}.

\textit{Cuckoo} состоит из~двух частей: рантайм библиотеки и~утилиты для~коммандной строки, который генерирует моковый класс. Типичное использование библиотеки выглядит следующим образом:

\begin{enumerate}
	\item Добавление очередного класса в~список файлов, для~которого должны быть созданы \textit{Mock} и~\textit{Stub}.
	\item Генерация нового файла со всем заглушками. Утилита для~коммандной строки создаст наследника класса или пустой класс, реализующий требуемый протокол, который способен запоминать список вызванных методов.
	\item Создание \textit{Mock} объекта.
	\item Описание поведения для~нового объекта. Обычно это сводится к инструкциям вида "если метод вызван с~определённым параметром -- верни определённый результат".
	\item Передача мокового объекта в~тестируемый класс.
	\item Вызов методов верификации на~моковом объекте. Обычно это сводится к инструкциям вида "данный метод должен быть вызван с~определёнными параметрами определённое количество раз".
\end{enumerate}